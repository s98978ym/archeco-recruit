---
import { getBlogs } from '../../lib/microcms';

let blogs = [];
let totalCount = 0;
try {
  const res = await getBlogs({ orders: '-publishedAt', limit: 20 });
  blogs = res.contents;
  totalCount = res.totalCount;
} catch (e) {}

const categories = ['ã™ã¹ã¦', 'ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼', 'ç¤¾é¢¨', 'åˆ¶åº¦', 'ã‚¤ãƒ™ãƒ³ãƒˆ'];
---
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ–ãƒ­ã‚° | Inside ARCHECO</title>
<meta name="description" content="ARCHECOã®ç¤¾å“¡ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã€ç¤¾é¢¨ã€åˆ¶åº¦ã€ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚">
<meta name="theme-color" content="#0a0a0a">
<script is:inline src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<script is:inline>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        copper: '#c9917a',
        dark: '#0a0a0a',
      },
      fontFamily: {
        sans: ['Inter', 'sans-serif'],
        heading: ['"Space Grotesk"', 'sans-serif'],
      }
    }
  }
}
</script>
<style is:inline>
html { scroll-behavior: smooth; }
body { font-family: 'Inter', sans-serif; background: #0a0a0a; color: #fff; }
h1, h2, h3, h4, h5, h6 { font-family: 'Space Grotesk', sans-serif; }
.bg-concrete {
  background: linear-gradient(135deg, #1a1a1a 0%, #111 25%, #1c1c1c 50%, #0f0f0f 75%, #1a1a1a 100%);
  background-size: 400px 400px;
}
.fade-in { opacity: 0; transform: translateY(30px); transition: opacity 0.7s ease, transform 0.7s ease; }
.fade-in.visible { opacity: 1; transform: translateY(0); }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: #111; }
::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
</style>
</head>
<body>

<!-- Header -->
<header class="fixed top-0 w-full z-50 bg-dark/80 backdrop-blur-md border-b border-gray-800/50">
  <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
    <a href="/" class="text-xl font-bold font-heading tracking-tight">ARCHECO</a>
    <nav class="flex items-center gap-6">
      <a href="/" class="text-gray-400 hover:text-copper transition text-sm">æ¡ç”¨ãƒˆãƒƒãƒ—</a>
      <a href="/blog" class="text-copper font-bold text-sm">ãƒ–ãƒ­ã‚°</a>
    </nav>
  </div>
</header>

<main class="pt-24">
  <!-- Hero -->
  <section class="py-16 bg-concrete">
    <div class="max-w-6xl mx-auto px-6 text-center fade-in">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">Inside ARCHECO</h1>
      <p class="text-gray-400 text-lg">ç¤¾å“¡ã®å£°ã€ã‚«ãƒ«ãƒãƒ£ãƒ¼ã€åƒãæ–¹ã®ãƒªã‚¢ãƒ«ã‚’ãŠå±Šã‘</p>
    </div>
  </section>

  <!-- Category Filter -->
  <section class="py-8 border-b border-gray-800">
    <div class="max-w-6xl mx-auto px-6">
      <div class="flex flex-wrap gap-3" id="category-filter">
        {categories.map((cat, i) => (
          <button
            data-category={cat === 'ã™ã¹ã¦' ? 'all' : cat}
            class={`px-4 py-2 rounded-full text-sm font-medium transition ${i === 0 ? 'bg-copper text-white' : 'bg-gray-800 text-gray-400 hover:bg-gray-700'}`}
          >
            {cat}
          </button>
        ))}
      </div>
    </div>
  </section>

  <!-- Blog Grid -->
  <section class="py-16">
    <div class="max-w-6xl mx-auto px-6">
      {blogs.length > 0 ? (
        <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-8" id="blog-grid">
          {blogs.map((blog) => (
            <a href={`/blog/${blog.id}`} data-category={blog.category} class="blog-card group bg-gray-900/70 border border-gray-800 rounded-xl overflow-hidden hover:border-copper/50 transition fade-in">
              {blog.eyecatch ? (
                <img src={blog.eyecatch.url} alt={blog.title} class="w-full h-48 object-cover group-hover:scale-105 transition duration-500" loading="lazy" />
              ) : (
                <div class="w-full h-48 bg-gray-800 flex items-center justify-center"><span class="text-gray-600 text-4xl">ğŸ“</span></div>
              )}
              <div class="p-6">
                <div class="flex items-center gap-3 mb-3">
                  <span class="text-xs text-copper font-bold bg-copper/10 px-2 py-1 rounded">{blog.category}</span>
                  <span class="text-xs text-gray-500">{new Date(blog.publishedAt).toLocaleDateString('ja-JP')}</span>
                </div>
                <h3 class="text-lg font-bold group-hover:text-copper transition line-clamp-2">{blog.title}</h3>
                {blog.description && <p class="text-gray-400 text-sm mt-2 line-clamp-2">{blog.description}</p>}
                {blog.writer && <p class="text-gray-500 text-xs mt-3">by {blog.writer}</p>}
              </div>
            </a>
          ))}
        </div>
      ) : (
        <div class="text-center py-20">
          <p class="text-gray-500 text-lg">ã¾ã è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“</p>
          <a href="/" class="inline-block mt-6 text-copper hover:underline">â† æ¡ç”¨ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</a>
        </div>
      )}
    </div>
  </section>
</main>

<!-- Footer -->
<footer class="border-t border-gray-800 py-12">
  <div class="max-w-6xl mx-auto px-6">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-8 mb-8">
      <div>
        <a href="/" class="text-2xl font-bold font-heading">ARCHECO</a>
        <p class="text-gray-500 mt-1">HUMBLE ROOTS, MASSIVE SPARKS.</p>
      </div>
      <nav class="flex flex-wrap gap-8 text-gray-400">
        <a href="/" class="hover:text-copper transition">æ¡ç”¨ãƒˆãƒƒãƒ—</a>
        <a href="/blog" class="hover:text-copper transition">ãƒ–ãƒ­ã‚°</a>
        <a href="mailto:info@archeco.co.jp" class="hover:text-copper transition">ãŠå•ã„åˆã‚ã›</a>
      </nav>
    </div>
    <div class="flex items-center gap-6 mb-8">
      <a href="https://archeco.co.jp" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-copper transition" title="Corporate Site">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5a17.92 17.92 0 01-8.716-2.247m0 0A8.966 8.966 0 013 12c0-1.264.26-2.466.733-3.559"/></svg>
      </a>
      <a href="https://www.instagram.com/archeco_inc/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-copper transition" title="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="currentColor" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9S160.5 370.7 224.1 370.7 339 319.4 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1S3.8 127.9 2.1 163.8c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
      </a>
      <a href="https://www.youtube.com/@ARCchannel-x8" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-copper transition" title="YouTube">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="currentColor" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    </div>
    <p class="text-gray-600 text-sm">&copy; 2026 ARCHECO. All rights reserved.</p>
  </div>
</footer>

<script is:inline>
// Category filter
document.querySelectorAll('#category-filter button').forEach(function(btn) {
  btn.addEventListener('click', function() {
    var cat = this.getAttribute('data-category');
    document.querySelectorAll('#category-filter button').forEach(function(b) {
      b.classList.remove('bg-copper', 'text-white');
      b.classList.add('bg-gray-800', 'text-gray-400');
    });
    this.classList.add('bg-copper', 'text-white');
    this.classList.remove('bg-gray-800', 'text-gray-400');
    document.querySelectorAll('.blog-card').forEach(function(card) {
      if (cat === 'all' || card.getAttribute('data-category') === cat) {
        card.style.display = '';
      } else {
        card.style.display = 'none';
      }
    });
  });
});

// Scroll animations
const observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) {
    if (entry.isIntersecting) { entry.target.classList.add('visible'); }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(function(el) { observer.observe(el); });
</script>

</body>
</html>
